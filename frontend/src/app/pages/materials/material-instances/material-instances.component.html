<div class="material-instances-container">
  <h2 class="section-header">{{ materialType }} Materials</h2>

  <div class="summary-card">
    <h3>Summary</h3>
    <p><span class="available">Available: {{ summary.available }}</span> | <span class="serving">Serving: {{ summary.serving }}</span> | <span class="reserved"> Reserved: {{ summary.reserved }} </span></p>
    <p style="color: blue;">Total Quantity: {{ summary.reserved + summary.available + summary.serving }}</p>
  </div>

  

  <h3>Summary by Room</h3>
  <table>
    <thead>
      <tr>
        <th>Room</th>
        <th style="color: blue;">Total Quantity</th>
        <th style="color: green;">Quantity Available</th>
        <th style="color: #f39c12;">Quantity Serving</th>
        <th style="color: #dc3545;">Quantity Reserved</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let room of getRoomNames()">
        <td style="font-weight: bold;"><a [routerLink]="['/rooms', room]" class="room-link">{{ room }}</a></td>
        <td style="font-weight: bold;">{{roomSummary[room].available + roomSummary[room].reserved + roomSummary[room].serving  }}</td>
        <td>{{ roomSummary[room].available }}</td>
        <td>{{ roomSummary[room].serving }}</td>
        <td>{{ roomSummary[room].reserved }}</td>
      </tr>
    </tbody>
  </table>

  <h3>All materials</h3>

  <div class="filter-section">
    <input type="text" [(ngModel)]="searchQuery" (input)="onSearch()" placeholder="Search instances..." class="search-input">

    <select [(ngModel)]="filterStatus" (change)="onFilterChange()">
      <option value="">All Statuses</option>
      <option value="available">Available</option>
      <option value="reserved">Reserved</option>
      <option value="serving">Serving</option>
    </select>

    <select [(ngModel)]="filterLocation" (change)="onFilterChange()">
      <option value="">All Locations</option>
      <option *ngFor="let loc of locations" [value]="loc">{{ loc }}</option>
    </select>
  </div>

  <div *ngIf="materialInstances.length > 0" class="card-grid">
    <div class="card material-instance-card" *ngFor="let instance of materialInstances" [routerLink]="['/materials', instance.id]">
      <h4>{{ instance.name }} ({{ instance.id }})</h4>
      <p>Details: {{ instance.details }}</p>
      <p>Status: 
  <span [class.available]="instance.isAvailable && !instance.isServing" 
        [class.reserved]="!instance.isAvailable" 
        [class.serving]="instance.isAvailable && instance.isServing">
    {{ !instance.isAvailable ? 'Reserved' : (instance.isServing ? 'Serving' : 'Available') }}
  </span>
</p>
      <p>Location: {{ instance.currentLocation }}</p>
    </div>
  </div>

  <div *ngIf="materialInstances.length === 0" class="no-instances-message">
    <p>No instances found for {{ materialType }}.</p>
  </div>

  <div class="pagination-controls">
    <button (click)="prevPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
  </div>

  <div class="back-button-container">
    <button routerLink="/home" class="back-button">Back to Home</button>
  </div>
</div>
